<html>

    <head>
        <link rel='stylesheet' type='text/css' href='/css/bootstrap.min.css' />
        <link rel='stylesheet' type='text/css' href='/css/material-icons.css' />
        <link rel='stylesheet' type='text/css' href='/css/main.css' />
        <link rel='stylesheet' type='text/css' href='/css/login.css' />
        <link
            href='https://fonts.googleapis.com/css2?family=Material+Icons+Two+Tone'
            rel='stylesheet'
        />

        <script type='text/javascript' src='/js/jquery-3.4.1.min.js'></script>
        <script type='text/javascript' src='/js/bootstrap.bundle.min.js'></script>
    </head>

    <body class='d-flex flex-column'>
        <div
            class='flex-fill bg-light p-4 d-flex flex-column justify-content-center align-items-center'
            id='main'
        >
            <div
                class='w-50 bg-light rounded-lg p-5 justify-content-center align-items-center'
            >
                <div class='text-center'>
                    <img src='/images/logo.png' width='50%' />
                </div>
                {{#if success}}
                <div class='alert alert-success text-center mt-3' role='alert'>
                    {{success}}
                </div>
                {{/if}}
                {{#if error}}
                <div class='alert alert-danger text-center mt-3' role='alert'>
                    {{error}}
                </div>
                {{/if}}
                <form action='/authenticate' method='POST'>
                    <div class='form-group mx-2 my-3'>
                        <label for='username'>Username</label>
                        <input
                            type='text'
                            class='form-control'
                            name='username'
                            id='username'
                            required
                        />
                    </div>
                    <div class='form-group mx-2 my-3'>
                        <label for='password'>Password</label>
                        <div class='input-group'>
                            <input
                                type='password'
                                class='form-control'
                                name='password'
                                id='password'
                                required
                            />
                            <button
                                class='btn btn-outline-secondary'
                                type='button'
                                id='toggle-password'
                            >Show</button>
                            <input type="hidden" name="_csrf" value="{{csrfToken}}">
                        </div>
                    </div>
                    <div class='d-grid gap-2 mx-4 mt-4 mb-2'>
                        <button
                            type='submit'
                            class='btn btn-dark rounded-lg'
                        >Login</button>
                    </div>
                </form>
            </div>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                const passwordInput = document.getElementById('password');
                const toggleButton = document.getElementById('toggle-password');

                if (passwordInput && toggleButton) {
                    toggleButton.addEventListener('click', function () {
                        const showing = passwordInput.type === 'text';
                        passwordInput.type = showing ? 'password' : 'text';
                        toggleButton.textContent = showing ? 'Show' : 'Hide';
                    });
                }
            });
        </script>
    </body>

</html>
